(()=>{"use strict";class t extends HTMLElement{#t={};#e={};#o=!1;#i={};#r=new Set(["number","integer","string","boolean"]);constructor(){super(),this.$={};let t=this.props||{};Object.defineProperties(this,Object.entries(t).reduce(((t,[e,o])=>{let i=o.attr||this.#s(e);return this.#t[i]={name:e,prop:o},null!=o.handler&&(this.#i[e]=t=>o.handler.apply(this,[t.detail]),this.addEventListener("$"+e,this.#i[e])),this.hasOwnProperty(e)?this.#e[e]=this[e]:"boolean"===o.type&&null==this.getAttribute(i)&&o.default&&(this.#e[e]=!0),t[e]={get:()=>{this.#n();let t=this.getAttribute(i);return null!=t&&""!==t||"boolean"===o.type?this.#l(t,o.type):o.default},set:t=>{this.#n(e),"boolean"===o.type?t?this.setAttribute(i,""):this.removeAttribute(i):this.setAttribute(i,t)}},t}),{}))}#n(t){if(!this.#o){this.#o=!0;for(let e in this.#e)e!==t&&(this[e]=this.#e[e])}}#s(t){return"data-"+t.replaceAll(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}$checkType(t,e){return"integer"==e&&Number.isInteger(t)||["string","boolean","number","object"].includes(e)&&typeof t===e||"array"==e&&Array.isArray(t)}#a(t,e,o){if(!this.#r.has(o))throw new TypeError(`Allowed types are "${this.#r}". Type given: ${o}`);if(!this.$checkType(e,o))throw new TypeError(`Type of "${t}" is ${o}. Value given: ${e}`)}#l(t,e){return"number"===e||"integer"===e?Number(t):"boolean"===e?null!=t:t}connectedCallback(){this.#n()}attributeChangedCallback(t,e,o){let i=this.#t[t],r=i.name,s=i.prop,n=this.#o;if(this.#n(),(n||!(r in this.#e))&&e!==o){if(null==r)return;let i=this.#l(o,s.type);if("boolean"!=s.type)try{if(this.#a(r,i,s.type),s.validator&&!s.validator.apply(this,[i]))throw`Prop "${t}" value ${value} is not valid`}catch(t){return console.error(t),void(null==e?this.removeAttribute(attrName):this.setAttribute(attrName,e))}const n=this.#l(e,s.type);this.dispatchEvent(new CustomEvent("$"+r,{detail:{oldValue:n,newValue:i}}))}}$set(t,e,o=!0){const i=this.#i[t];o&&null!=i&&this.removeEventListener("$"+key,i),this[t]=e,o&&null!=i&&setTimeout((()=>this.addEventListener("$"+key,i)))}#h(t,e,o,i){const{id:r,on:s,attrs:n,name:l,props:a}=e,h="string"==typeof t?document.createElement(t):t;null!=e.class&&(h.className=e.class),null!=r&&(h.id=r),null!=l&&(i[l]=h);for(const t in s||{})h.addEventListener(t,s[t]);"string"==typeof o&&(o=[o]);for(const t of o)"string"==typeof t?h.appendChild(document.createTextNode(t)):Array.isArray(t)&&h.appendChild(this.$createElement(t,i));for(const t in n||{})h.setAttribute(t,n[t]);for(const t in a)h[t]=a[t];return h}$createElement(t,e){e=e||{};let o="div",i={};return(t[0]instanceof Element||t[0]instanceof DocumentFragment||"string"==typeof t[0])&&(o=t[0],t=t.slice(1)),"object"!=typeof t[0]||null==t[0]||Array.isArray(t[0])||(i=t[0],t=t.slice(1)),this.#h(o,i,t,e)}$buildShadow(t,e="open"){this.attachShadow({mode:e}),this.$createElement([this.shadowRoot,...t],this.$)}}function e(t,e,o){return o.maxWidth=t,o.maxHeight=e,o}customElements.define("rw-dropdown",class extends t{#d;#p;constructor(){super(),this._opened=!1,this._holderLastRect={},this._dropdownLastRect={},this.#p=this.#c.bind(this),this.#d=this.#u.bind(this),this.$buildShadow([["style","\n  :host {\n    display: block;\n    z-index: 2147483647;\n    opacity: 0;\n  }\n\n  :host(.opened) {\n    opacity: 1;\n  }\n\n  .back {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    background-color: var(--rw-dropdown-overlay-color, none);\n  }\n\n  .dropdown {\n    background-color: var(--rw-dropdown-color, white);\n    border-radius: var(--rw-dropdown-radius, 2px);\n    position: absolute;\n    filter: var(--rw-dropdown-filter, drop-shadow(0px 1px 5px #0005));\n    overflow: visible;\n    box-sizing: content-box;\n  }\n\n  .arrow {\n    position: absolute;\n    width: 0;\n    height: 0;\n    border: calc(var(--rw-dropdown-arrow-width, 0) * 1px) solid #0000;\n  }\n\n  .arrow-bottom {\n    top: calc(var(--rw-dropdown-arrow-height, 0) * -1px);\n    border-bottom: calc(var(--rw-dropdown-arrow-height, 0) * 1px) solid var(--rw-dropdown-color, white);\n    border-top: none;\n  }\n  \n  .arrow-top {\n    bottom: calc(var(--rw-dropdown-arrow-height, 0) * -1px);\n    border-top: calc(var(--rw-dropdown-arrow-height, 0) * 1px) solid var(--rw-dropdown-color, white);\n    border-bottom: none;\n  }\n\n  .arrow-right {\n    left: calc(var(--rw-dropdown-arrow-height, 0) * -1px);\n    border-right: calc(var(--rw-dropdown-arrow-height, 0) * 1px) solid var(--rw-dropdown-color, white);\n    border-left: none;\n  }\n  \n  .arrow-left {\n    right: calc(var(--rw-dropdown-arrow-height, 0) * -1px);\n    border-left: calc(var(--rw-dropdown-arrow-height, 0) * 1px) solid var(--rw-dropdown-color, white);\n    border-right: none;\n  }\n"],[{name:"back",class:"back"}],[{name:"dropdown",class:"dropdown"},[{name:"arrow",class:"arrow"}],[{attrs:{style:"overflow: auto;"}},["slot"]]]])}static get observedAttributes(){return["data-transition-time","data-persistent","data-intangible","data-dropdown-style","data-dropdown-position","data-query-selector"]}get props(){return this._possibleDropdowns=["normal","center","fit","corner"],this._centralPositions=["top","bottom","left","right"],this._numericProps=[...this._centralPositions,"maxWidth","maxHeight","width","height"],this._cornerPositions=["top_left","top_right","bottom_left","bottom_right"],this._possiblePositions=[...this._centralPositions,...this._cornerPositions],this._positions=new Set(this._possiblePositions),this._holder=null,{transitionTime:{type:"number",default:300},persistent:{type:"boolean"},intangible:{type:"boolean"},dropdownStyle:{type:"string",default:"normal",validator(t){return this._possibleDropdowns.includes(t)}},dropdownPosition:{type:"string",default:"all",validator(t){if("all"===(t=t.trim()))return!0;const e=t.split(/ +/);for(const t of e)if(!this._possiblePositions.includes(t))return!1;return!0},handler({newValue:t}){t=t.trim(),this._positions="all"===t?new Set(this._possiblePositions):new Set(t.trim().split(/ +/))}},querySelector:{type:"string",handler({newValue:t}){this._holder=document.querySelector(t)}}}}connectedCallback(){super.connectedCallback(),this._opened=!0}disconnectedCallback(){this._opened=!1}#c(t){t.target!==this&&this.contains(t.target)||this.close()}toggle(){this._opened?this.close():this.open()}open(){this._opened||(this.$.back.style.pointerEvents=this.intangible?"none":"auto",document.body.append(this),setTimeout((()=>{this.#w(),this.style.transition=`opacity ${this.transitionTime}ms`,this.classList.add("opened"),this.persistent||document.addEventListener("click",this.#p),window.addEventListener("resize",this.#d),this._holderRectCheck=setInterval((()=>this.#g()),200),this._dropdownRectCheck=setInterval((()=>this.#m()),200)})))}close(){this._opened&&(this.persistent||document.removeEventListener("click",this.#p),clearInterval(this._holderRectCheck),clearInterval(this._dropdownRectCheck),window.removeEventListener("resize",this.#d),this.classList.remove("opened"),setTimeout((()=>this.remove()),this.transitionTime))}#b(t){const o=document.documentElement,i=o.clientHeight,r=o.clientWidth,s=r-t.right,n=i-t.bottom,l=r-t.x,a=i-t.y,h=+getComputedStyle(this).getPropertyValue("--rw-dropdown-arrow-height"),d=+getComputedStyle(this).getPropertyValue("--rw-dropdown-arrow-width"),p=t.x-h,c=t.y-h,u=s-h,w=n-h,g=a+h,m=l+h,b=t.right+h,y=t.bottom+h;if(this._arrowPositions={x:t.x+t.width/2-d,y:t.y+t.height/2-d},this._largestSize=-1/0,"normal"===this.dropdownStyle){const o={top_left:e(t.right,c,{right:s,bottom:g}),top_right:e(l,c,{left:t.x,bottom:g}),left_top:e(p,t.bottom,{right:m,bottom:n}),left_bottom:e(p,a,{right:m,top:t.y}),right_top:e(u,t.bottom,{left:b,bottom:n}),right_bottom:e(u,a,{left:b,top:t.y}),bottom_left:e(t.right,w,{right:s,top:y}),bottom_right:e(l,w,{left:t.x,top:y})};for(let t of this._positions)["top","bottom"].includes(t)?this.#y(o,[t+"_right",t+"_left"]):this.#y(o,[t+"_bottom",t+"_top"])}else{let o;if("center"===this.dropdownStyle){const s={transform:"translateX(-50%)",left:t.x+t.width/2},n={transform:"translateY(-50%)",top:t.y+t.height/2};o={top:e(r,c,{bottom:g,...s}),left:e(p,i,{right:m,...n}),right:e(u,i,{left:b,...n}),bottom:e(r,w,{top:y,...s})}}else if("fit"===this.dropdownStyle){const i={left:t.x,width:t.width},r={top:t.y,height:t.height};o={top:e(t.width,c,{bottom:g,...i}),left:e(p,t.height,{right:m,...r}),right:e(u,t.height,{left:b,...r}),bottom:e(t.width,w,{top:y,...i})}}else"corner"===this.dropdownStyle&&(o={top_left:e(t.x,t.y,{right:l,bottom:a}),top_right:e(s,t.y,{left:t.right,bottom:a}),bottom_left:e(t.x,n,{right:l,top:t.bottom}),bottom_right:e(s,n,{left:t.right,top:t.bottom})});this.#y(o,this._positions)}}#y(t,e){for(const o of e){if(!t.hasOwnProperty(o))continue;const e=t[o];e.maxWidth*e.maxHeight>this._largestSize&&(this._largestSize=e.maxWidth*e.maxHeight,this._largestBoxPosition=o,this._largestBoxStyle=e)}}#u(){clearTimeout(this._debouncedUpdateTimeoutID),this._debouncedUpdateTimeoutID=setTimeout((()=>this.#w()),200)}#f(t,e){for(const o of["x","y","width","height"])if(t[o]!=e[o])return!1;return!0}#g(){const t=this._holder.getBoundingClientRect();this.#f(this._holderLastRect,t)||(this._holderLastRect=t,this.#d())}#m(){const t=this.$.dropdown.getBoundingClientRect();this.#f(this._dropdownLastRect,t)||(this._dropdownLastRect=t,this.#d())}#_(){if("corner"===this.dropdownStyle)return;const t=this._largestBoxPosition.split("_")[0];if(this.$.arrow.className="arrow arrow-"+t,this.$.arrow.style.cssText="",["top","bottom"].includes(t)){const t=this._arrowPositions.x-this._dropdownLastRect.x;this.$.arrow.style.left=t+"px"}else{const t=this._arrowPositions.y-this._dropdownLastRect.y;this.$.arrow.style.top=t+"px"}}#w(){if(null===this._holder)return;const t=this._holder.getBoundingClientRect();this._holderLastRect=t,this.#b(t),"center"===this.dropdownStyle?this.#x(t):this.#v(this._largestBoxStyle),this._dropdownLastRect=this.$.dropdown.getBoundingClientRect(),this.#_()}#v(t){this.$.dropdown.style.cssText="",Object.entries(t).forEach((([t,e])=>{this._numericProps.includes(t)&&(e+="px"),this.$.dropdown.style[t]=e}))}#x(t){this.$.dropdown.style.cssText="",this.$.dropdown.style.width="fit-content",this.$.dropdown.style.height="fit-content";const e=this.$.dropdown.clientWidth,o=this.$.dropdown.clientHeight,i=document.documentElement;if(["bottom","top"].includes(this._largestBoxPosition)){const o=t.x+t.width/2;this.#$(e,o,i.clientWidth,["left","right"])}else{const e=t.y+t.height/2;this.#$(o,e,i.clientHeight,["top","bottom"])}}#$(t,e,o,i){e<o/2?this.#C(t,e,i[0],i[1]):this.#C(t,o-e,i[1],i[0])}#C(t,e,o,i){if(t/2<e)this.#v(this._largestBoxStyle),this.$.dropdown.style.width="fit-content",this.$.dropdown.style.height="fit-content";else{const t=Object.assign({},this._largestBoxStyle);delete t.transform,delete t[i],t[o]=0,this.#v(t)}}})})();